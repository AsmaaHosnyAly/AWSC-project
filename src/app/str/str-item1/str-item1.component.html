<mat-card dir="rtl">
  <mat-card-content>
    <div class="page-title">الأصناف</div>
    <form [formGroup]="itemForm">
      <mat-accordion class="example-headers-align" multi dir="rtl">
        <mat-expansion-panel>
          <mat-expansion-panel-header class="searchadvance">
            <mat-panel-description>
              بحث متقدم
              <mat-icon>search</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="search">
            <mat-form-field appearance="outline">
              <mat-label>الصنف</mat-label>
              <input
                #item
                matInput
                placeholder="ادخل الصنف"
                formControlName="itemName"
              />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>الكود</mat-label>
              <input
                #code
                matInput
                placeholder="ادخل الكود"
                formControlName="fullCode"
              />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>النوع</mat-label>
              <mat-select #type id="sourceInput" formControlName="type">
                <mat-option value="عهدة">عهدة</mat-option>
                <mat-option value="مستهلك">مستهلك</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>الوحدة</mat-label>
              <input
                matInput
                aria-label="unit"
                [matAutocomplete]="autoUnit"
                [formControl]="unitCtrl"
                formControlName="unitN"
                (click)="openAutoUnit()"
                required
              />
              <mat-autocomplete
                #autoUnit="matAutocomplete"
                [displayWith]="displayUnitName"
                (optionSelected)="unitSelected($event)"
              >
                <mat-option
                  *ngFor="let unit of filteredUnits | async"
                  [value]="unit"
                >
                  {{ unit.name }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>السلعة</mat-label>
              <input
                matInput
                aria-label="commodity"
                [matAutocomplete]="autoCommodity"
                (click)="openAutoCommodity()"
                [formControl]="commodityCtrl"
                formControlName="commodityN"
                required
              />
              <mat-autocomplete
                #autoCommodity="matAutocomplete"
                [displayWith]="displayCommodityName"
                (optionSelected)="commoditySelected($event)"
              >
                <mat-option
                  *ngFor="let commodity of filteredCommodities | async"
                  [value]="commodity"
                >
                  {{ commodity.name }} | {{ commodity.code }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>النوعية</mat-label>
              <input
                matInput
                aria-label="grade"
                [matAutocomplete]="autoGrade"
                [formControl]="gradeCtrl"
                formControlName="gradeN"
                required
                (click)="openAutoGrade()"
                required
              />
              <mat-autocomplete
                #autoGrade="matAutocomplete"
                [displayWith]="displayGradeName"
                (optionSelected)="gradeSelected($event)"
              >
                <mat-option
                  *ngFor="let grade of filteredGrades | async"
                  [value]="grade"
                >
                  {{ grade.name }} | {{ grade.code }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>الفصيلة</mat-label>
              <input
                matInput
                aria-label="platoon"
                [matAutocomplete]="autoPlatoon"
                [formControl]="platoonCtrl"
                formControlName="platoonN"
                (click)="openAutoPlatoon()"
                required
              />
              <mat-autocomplete
                #autoPlatoon="matAutocomplete"
                [displayWith]="displayPlatoonName"
                (optionSelected)="platoonSelected($event)"
              >
                <mat-option
                  *ngFor="let platoon of filteredPlatoons | async"
                  [value]="platoon"
                >
                  {{ platoon.name }} | {{ platoon.code }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>المجموعة</mat-label>
              <input
                matInput
                aria-label="group"
                [matAutocomplete]="autoGroup"
                [formControl]="groupCtrl"
                formControlName="groupN"
                (click)="openAutoGroup()"
                required
              />
              <mat-autocomplete
                #autoGroup="matAutocomplete"
                [displayWith]="displayGroupName"
                (optionSelected)="groupSelected($event)"
              >
                <mat-option
                  *ngFor="let group of filteredGroups | async"
                  [value]="group"
                >
                  {{ group.name }} | {{ group.code }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label> التقرير المراد طباعته"</mat-label>
              <mat-select #fiscalYear plceholder="  التقرير المراد طباعته">
                <mat-option></mat-option>
              </mat-select>
            </mat-form-field>
            <!-- <div class="print-display">
              <fa-icon
                [icon]="faMagnifyingGlass"
                (click)="getSearch(item.value)"
                class="icons"
                title="بحث"
              ></fa-icon>

              <fa-icon
                [icon]="faFilePdf"
                (click)="preview(item.value, code.value, type.value)"
                class="icons"
                title="عرض"
              ></fa-icon>

              <fa-icon
                [icon]="faDownload"
                (click)="
                  getSearchItemsWithprint(item.value, code.value, type.value)
                "
                class="icons"
                title="تحميل"
              ></fa-icon>
              <fa-icon
                [icon]="faEraser"
                (click)="getAllItems()"
                class="icons"
                title="حذف قيم البحث"
              ></fa-icon>
            </div> -->
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </form>
    <mat-card-header dir="ltr">
      <div class="child1">
        <button mat-raised-button class="add" (click)="openDialog()" dir="ltr">
          <span class="ms-2">اضافة</span> <mat-icon class="me-1">add</mat-icon>
        </button>
      </div>

      <div>
        <input
          class="filter-search"
          matInput
          (keyup)="applyFilter($event)"
          placeholder="بحث"
          #input
        />
      </div>
    </mat-card-header>
    <div id="content" class="content">
      <header id="header" class="header">
        <div class="header-one">
          <p>الاصناف</p>
        </div>
        <div class="header-two">
          <img src="../assets/images/water logo.png" />
          <p>شركة مياه الشرب والصرف الصحى بأسوان</p>
        </div>
      </header>
      <div class="div-table">
        <table matSort mat-table [dataSource]="dataSource">
          <!-- Item fullCode Column -->
          <ng-container matColumnDef="fullCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="code">
              الكود
            </th>
            <td mat-cell *matCellDef="let row" class="code">
              {{ row.fullCode }}
            </td>
          </ng-container>

          <!-- Item Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>اسم الصنف</th>
            <td mat-cell *matCellDef="let row">{{ row.name }}</td>
          </ng-container>

          <!-- Item Number Column -->
          <!-- <ng-container matColumnDef="no">
          <th mat-header-cell *matHeaderCellDef>رقم الصنف</th>
          <td mat-cell *matCellDef="let row">{{ row.no }}</td>
        </ng-container> -->

          <!-- Type Column -->
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>النوع</th>
            <td mat-cell *matCellDef="let row">{{ row.type }}</td>
          </ng-container>

          <!-- isActive Column -->
          <!-- <ng-container matColumnDef="isActive">
            <th mat-header-cell *matHeaderCellDef>الحالة</th>
            <td mat-cell *matCellDef="let row">{{ row.isActive }}</td>
          </ng-container> -->

          <!-- Unit Column -->
          <ng-container matColumnDef="unitName">
            <th mat-header-cell *matHeaderCellDef>الوحدة</th>
            <td mat-cell *matCellDef="let row">{{ row.unitName }}</td>
          </ng-container>

          <!-- commodity Column -->
          <ng-container matColumnDef="commodityName">
            <th mat-header-cell *matHeaderCellDef>السلعة</th>
            <td mat-cell *matCellDef="let row">{{ row.commodityName }}</td>
          </ng-container>

          <!-- grad Column -->
          <ng-container matColumnDef="gradeName">
            <th mat-header-cell *matHeaderCellDef>النوعية</th>
            <td mat-cell *matCellDef="let row">{{ row.gradeName }}</td>
          </ng-container>

          <!-- Platoon Column -->
          <ng-container matColumnDef="platoonName">
            <th mat-header-cell *matHeaderCellDef>الفصيلة</th>
            <td mat-cell *matCellDef="let row">{{ row.platoonName }}</td>
          </ng-container>

          <!-- Group Column -->
          <ng-container matColumnDef="groupName">
            <th mat-header-cell *matHeaderCellDef>المجموعة</th>
            <td mat-cell *matCellDef="let row">{{ row.groupName }}</td>
          </ng-container>

          <!-- action Column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell id="action1" *matHeaderCellDef mat-sort-header>
              الإجراء
            </th>
            <td mat-cell *matCellDef="let row">
              <div id="action2" class="d-flex">
                <button
                  mat-icon-button
                  id="button1"
                  (click)="editItem(row)"
                  class="editbtn"
                >
                  <mat-icon>edit</mat-icon>
                </button>
                <button
                  mat-icon-button
                  id="button2"
                  color="warn"
                  (click)="deleteItem(row.id)"
                >
                  <mat-icon>delete_forever</mat-icon>
                </button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              لا توجد بيانات للبحث !!{{ input.value }}"
            </td>
          </tr>
        </table>
      </div>

      <footer id="reportFooter">
        <h3>الأمضاءات</h3>
        <p>مدير إدارة الشركة :</p>
        <p>مدير إدارة المخزن :</p>
      </footer>
      <div class="date" id="date">
        <p>{{ myDate | date : "shortDate" }}</p>
      </div>
    </div>
  </mat-card-content>
  <br />
  <mat-card-footer>
    <mat-paginator
      id="paginator"
      [pageSizeOptions]="[5, 10, 20]"
      showFirstLastButtons
    ></mat-paginator>
  </mat-card-footer>
</mat-card>

<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Hi there!</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="d('Cross click')"
    ></button>
  </div>
  <div class="modal-body"></div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="c('Save click')"
    >
      Save
    </button>
  </div>
</ng-template>
